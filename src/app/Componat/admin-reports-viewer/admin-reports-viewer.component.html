  <div class="reports-viewer-container">
    <div class="header">
      <h1>ğŸ“‹ Reports Viewer</h1>
      <button class="btn-schedule" (click)="openScheduleForm()">â° Schedule Report</button>
    </div>

    <div *ngIf="isLoading" class="loading-spinner"></div>

    <div class="content" *ngIf="!isLoading">
      <div class="main-area">
        <!-- Report History -->
        <div class="section">
          <h2>ğŸ“‚ Report Generation History</h2>
          
          <div class="reports-list">
            <div class="report-item" *ngFor="let report of reportHistory" (click)="viewReport(report)" [class.selected]="selectedReport?.id === report.id">
              <div class="report-icon">
                <span *ngIf="report.type === 'pdf'">ğŸ“„</span>
                <span *ngIf="report.type === 'excel'">ğŸ“Š</span>
              </div>
              <div class="report-info">
                <h4>{{ report.name }}</h4>
                <p class="meta">Generated: {{ report.generatedAt | date:'MMM dd, yyyy HH:mm' }} â€¢ {{ report.fileSize }}</p>
              </div>
              <div class="report-status">
                <span class="status-badge" [class]="'status-' + getStatusBadgeClass(report.status)">
                  {{ getStatusIcon(report.status) }} {{ report.status }}
                </span>
              </div>
              <div class="report-actions">
                <button class="btn-icon" (click)="viewReport(report); $event.stopPropagation()" title="View">ğŸ‘ï¸</button>
                <button class="btn-icon" (click)="downloadReport(report); $event.stopPropagation()" title="Download">â¬‡ï¸</button>
                <button class="btn-icon" (click)="regenerateReport(report); $event.stopPropagation()" title="Regenerate">ğŸ”„</button>
                <button class="btn-icon delete" (click)="deleteReport(report); $event.stopPropagation()" title="Delete">ğŸ—‘ï¸</button>
              </div>
            </div>

            <div *ngIf="reportHistory.length === 0" class="empty-state">
              <p>No reports generated yet</p>
            </div>
          </div>
        </div>

        <!-- Preview Area -->
        <div class="section preview-section" *ngIf="selectedReport">
          <h2>ğŸ‘ï¸ Report Preview: {{ selectedReport.name }}</h2>
          <div class="preview-container">
            <div class="preview-placeholder" [class]="'type-' + selectedReport.type">
              <div class="preview-icon">
                <span *ngIf="selectedReport.type === 'pdf'">ğŸ“„</span>
                <span *ngIf="selectedReport.type === 'excel'">ğŸ“Š</span>
              </div>
              <p>{{ selectedReport.name }}</p>
              <small>Generated: {{ selectedReport.generatedAt | date:'MMM dd, yyyy HH:mm' }}</small>
              <small>File size: {{ selectedReport.fileSize }}</small>
              
              <div class="preview-actions">
                <button class="btn-preview" (click)="downloadReport(selectedReport)">â¬‡ï¸ Download {{ selectedReport.type | uppercase }}</button>
                <button class="btn-preview secondary" (click)="regenerateReport(selectedReport)">ğŸ”„ Regenerate</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Distribution Settings -->
        <div class="sidebar-section">
          <h3>ğŸ“§ Distribution List</h3>
          <div class="distribution-list">
            <div class="dist-item">
              <span>adminexample.com</span>
              <button class="btn-remove">âœ•</button>
            </div>
            <div class="dist-item">
              <span>managerexample.com</span>
              <button class="btn-remove">âœ•</button>
            </div>
          </div>
          <button class="btn-add-dist" (click)="addDistributionList()">â• Add Email</button>
        </div>

        <!-- Scheduled Reports -->
        <div class="sidebar-section">
          <h3>â° Scheduled Reports</h3>
          <div class="scheduled-list">
            <div class="scheduled-item">
              <h5>Weekly Booking Report</h5>
              <p>ğŸ“§ every Monday</p>
              <p>ğŸ‘¥ 2 recipients</p>
            </div>
            <div class="scheduled-item">
              <h5>Monthly Revenue</h5>
              <p>ğŸ“§ every 1st of month</p>
              <p>ğŸ‘¥ 1 recipient</p>
            </div>
          </div>
        </div>

        <!-- Report Formats -->
        <div class="sidebar-section">
          <h3>ğŸ“‹ Supported Formats</h3>
          <div class="format-list">
            <div class="format-item">
              <span>ğŸ“„ PDF</span>
              <small>Best for viewing</small>
            </div>
            <div class="format-item">
              <span>ğŸ“Š Excel</span>
              <small>Best for data analysis</small>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Schedule Form Modal -->
    <div class="modal" *ngIf="showScheduleForm">
      <div class="modal-overlay" (click)="closeScheduleForm()"></div>
      <div class="modal-content">
        <h2>â° Schedule Report</h2>
        <div class="form-group">
          <label>Report Type</label>
          <select [(ngModel)]="reportType" class="form-input">
            <option value="bookings">Bookings Report</option>
            <option value="users">Users Report</option>
            <option value="revenue">Revenue Report</option>
            <option value="teachers">Teachers Report</option>
          </select>
        </div>
        <div class="form-group">
          <label>Email Address</label>
          <input type="email" [(ngModel)]="scheduleEmail" class="form-input" placeholder="admin@example.com">
        </div>
        <div class="form-group">
          <label>Frequency</label>
          <select [(ngModel)]="scheduleFrequency" class="form-input">
            <option value="daily">Daily</option>
            <option value="weekly" selected>Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
        </div>
        <div class="modal-actions">
          <button class="btn cancel" (click)="closeScheduleForm()">Cancel</button>
          <button class="btn confirm" (click)="scheduleReport()">Schedule</button>
        </div>
      </div>
    </div>
  </div>