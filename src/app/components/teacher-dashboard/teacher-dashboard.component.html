<div class="teacher-dashboard-container">
  <div class="header">
    <h1>ğŸ‘¨â€ğŸ« Teacher Dashboard</h1>
    <p>Welcome back, {{ teacherProfile?.fullName }}</p>
  </div>

  <div *ngIf="isLoading" class="loading-spinner"></div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">ğŸ‘¥</div>
      <h3>{{ stats.totalStudents }}</h3>
      <p>Total Students</p>
    </div>
    <div class="stat-card">
      <div class="stat-icon">âœ…</div>
      <h3>{{ stats.completedClasses }}</h3>
      <p>Completed Classes</p>
    </div>
    <div class="stat-card">
      <div class="stat-icon">â­</div>
      <h3>{{ (stats.averageRating) | number:'1.1-1' }}/5</h3>
      <p>Average Rating</p>
    </div>
    <div class="stat-card">
      <div class="stat-icon">ğŸ’°</div>
      <h3>LKR {{ (stats.monthlyEarnings) | number:'1.0-0' }}</h3>
      <p>Monthly Earnings</p>
    </div>
  </div>

  <!-- Week Stats -->
  <div class="week-stats">
    <div class="week-card">
      <p class="label">Classes This Week</p>
      <h2>{{ weekStats.classesThisWeek }}</h2>
    </div>
    <div class="week-card">
      <p class="label">Week Earnings</p>
      <h2>LKR {{ (weekStats.earningsThisWeek) | number:'1.0-0' }}</h2>
    </div>
    <div class="week-card">
      <p class="label">New Students</p>
      <h2>{{ weekStats.studentsThisWeek }}</h2>
    </div>
  </div>

  <!-- Upcoming Classes Section -->
  <div class="section">
    <div class="section-header">
      <h2>ğŸ“… Upcoming Classes</h2>
      <button class="btn-link" (click)="navigate('/my-classes')">View All â†’</button>
    </div>
    <div class="upcoming-list" *ngIf="upcomingClasses.length > 0; else noUpcoming">
      <div class="class-card" *ngFor="let cls of upcomingClasses">
        <div class="class-header">
          <h3>{{ cls.subject }}</h3>
          <span class="status-badge confirmed">{{ cls.status }}</span>
        </div>
        <div class="class-body">
          <p><strong>Student ID:</strong> {{ cls.studentId }}</p>
          <p><strong>Date:</strong> {{ cls.date | date:'MMM dd, yyyy' }}</p>
          <p><strong>Time:</strong> {{ cls.startTime }} - {{ cls.endTime }}</p>
          <p><strong>Type:</strong> {{ cls.classType }}</p>
        </div>
        <button class="btn-primary" (click)="navigate('/my-classes')">View Details</button>
      </div>
    </div>
    <ng-template #noUpcoming>
      <div class="empty-state">
        <p>No upcoming classes. Your calendar is clear!</p>
      </div>
    </ng-template>
  </div>

  <!-- Pending Requests -->
  <div class="section">
    <div class="section-header">
      <h2>â³ Pending Booking Requests</h2>
      <span class="badge">{{ pendingRequests.length }}</span>
    </div>
    <div class="pending-list" *ngIf="pendingRequests.length > 0; else noPending">
      <div class="pending-card" *ngFor="let req of pendingRequests">
        <div class="pending-header">
          <h3>{{ req.subject }}</h3>
        </div>
        <div class="pending-body">
          <p><strong>Student:</strong> {{ req.studentId }}</p>
          <p><strong>Requested Date:</strong> {{ req.date | date:'MMM dd, yyyy' }}</p>
          <p><strong>Time:</strong> {{ req.startTime }} - {{ req.endTime }}</p>
          <p><strong>Type:</strong> {{ req.classType }}</p>
        </div>
        <div class="pending-actions">
          <button class="btn-accept" (click)="acceptRequest(req)">âœ“ Accept</button>
          <button class="btn-reject" (click)="rejectRequest(req)">âœ— Reject</button>
          <button class="btn-reschedule">ğŸ“… Reschedule</button>
        </div>
      </div>
    </div>
    <ng-template #noPending>
      <div class="empty-state">
        <p>No pending requests at the moment.</p>
      </div>
    </ng-template>
  </div>

  <!-- Monthly Earnings Trend -->
  <div class="section">
    <h2>ğŸ“Š Monthly Earnings Trend</h2>
    <div class="earnings-chart">
      <div class="chart-placeholder">
        <p>Monthly Earnings Chart</p>
        <div class="mock-chart">
          <div *ngFor="let month of monthlyEarnings" class="month-bar">
            <div class="bar" [style.height.%]="(month.earnings / 50000) * 100"></div>
            <p>{{ month.month }}</p>
            <small>LKR {{ (month.earnings) | number:'1.0-0' }}</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Reviews -->
  <div class="section">
    <div class="section-header">
      <h2>â­ Recent Student Reviews</h2>
      <button class="btn-link" (click)="navigate('/reviews-ratings')">View All â†’</button>
    </div>
    <div class="reviews-carousel" *ngIf="recentReviews.length > 0; else noReviews">
      <div class="review-card" *ngFor="let review of recentReviews">
        <div class="review-header">
          <h4>{{ review.studentName }}</h4>
          <span class="rating">
            <span *ngFor="let i of [1,2,3,4,5]" class="star" [class.filled]="i <= review.rating">â˜…</span>
          </span>
        </div>
        <p class="review-text">{{ review.text }}</p>
        <small>{{ review.date | date:'MMM dd, yyyy' }}</small>
      </div>
    </div>
    <ng-template #noReviews>
      <div class="empty-state">
        <p>No reviews yet. Keep teaching and get your first review!</p>
      </div>
    </ng-template>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <button class="action-btn" (click)="navigate('/teacher/analytics')">
      ğŸ“Š View Analytics
    </button>
    <button class="action-btn" (click)="navigate('/teacher/students')">
      ğŸ‘¥ Manage Students
    </button>
    <button class="action-btn" (click)="navigate('/teacher/lesson-planner')">
      ğŸ“ Lesson Planner
    </button>
    <button class="action-btn" (click)="navigate('/teacher/attendance')">
      âœ… Mark Attendance
    </button>
    <button class="action-btn" (click)="navigate('/teacher/messages')">
      ğŸ’¬ Messages
    </button>
    <button class="action-btn" (click)="navigate('/manage-profile')">
      ğŸ‘¤ Manage Profile
    </button>
    <button class="action-btn" (click)="navigate('/manage-schedule')">
      ğŸ“… Update Schedule
    </button>
    <button class="action-btn" (click)="navigate('/my-classes')">
      ğŸ‘¥ View All Classes
    </button>
    <button class="action-btn" (click)="navigate('/resources-upload')">
      ğŸ“¤ Upload Resources
    </button>
  </div>
</div>